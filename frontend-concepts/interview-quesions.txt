1) JSON.stringify v/s structuredClone 
 structuredClone advantages:
 - structuredClone can handle circular references 
 - Date, Map, Set are preserved 
 - faster for complex objects 
 Use JSON.stringify for simple JSON compatible data (API payload, response)

2) Retry with exponential backoff 
 - Refer to fetchWithAutoRetry.js

3) Avoid updating state of unmounted components - AbortController 
    useEffect(() => {
        const controller = new AbortController();
        fetch(
            '/api/data', 
            {signal: controller.signal}
        )
        .then(res => res.json())
        .then(
            (data) => setData(data)
        ).catch(e => setData([]));
        return () => controller.abort();
    }, []);

4) Implement a custom debounce JS function 
 - Refer to pollyfills.js 
 
5) How to avoid full app re-render on theme change? 
 - Use CSS variables instead of React layer
 - useSyncExternalStore 

    // Without any React re-render
    useEffect(() => {
        document.documentElement.setAttribute("data-theme", theme);
    }, [theme]);

    /* CSS */
    :root[data-theme="light"] {
    --bg-color: #fff;
    --text-color: #000;
    }

6) CommonJS          v/s    ES Module 
   require, exports       import/export
   synchronous            asynchronous
   cached by default      not cached by default 
   useful in server-side  both client & server side
   (Node)
   dynamic import X       supports dynamic import 
                          (useful for lazy or conditional loading)
   Tree shaking X         tree shaking is supported 
   Legacy NodeJS projects Modern Node JS BE projects with "type": "module"
                          frontend apps with webpack, vite, Next.js 

Note: Old jest.config and eslint.config before Node 20 supported only CommonJS with module.exports syntax 

7) Write a function compose(fn1, fn2, fn3...) that performs function composition — i.e.,
compose(f, g, h)(x) should return f(g(h(x))).

8) Implement a deepClone(obj) function that can clone nested objects, arrays, and handles circular references.
 - Refer to deepClone.js

9) Custom functions for:
 - Promise.all 
 - bind 

10) Redux toolkit:
    - createSlice (auto-generates actions & reducers)
    - RTK Query - createAPI 
      -> createApi slice has reducer and  middleware
      -> defines base url, endpoints, caching behaviour
      -> auto-generates hooks based on query name 
         (useGetUsersQuery/useAddUsersMutation)      
    - createAsyncThunk
       -> built on top of Redux thunk 
       -> automatically generates pending, fulfilled, rejected actions 

11) script normal v/s async v/s defer 

Script = HTML parsing + (parsing paused) JS download + JS execution + Resume HTML parsing 
script async = HTML parsing and JS download parallelly + (parsing paused) JS execution + Resume HTML parsing (order is not maintained, the one downloaded first is executed first)
script defer = HTML parsing full and JS download parallelly + JS execution (maintains order)

==================

https://prepfully.com/interview-questions/agoda/frontend-engineer?page=1

Coding:

How to differentiate between null and undefined? What are the best practices?

How do you plan to tackle the serialization and deserialization of unconventional data types like Dates or Functions in JS? 
    const copied = JSON.parse(
        JSON.stringify(obj),
        (key, val) => {
            if (key === 'password') return null;
            // if (key === 'createdAt') {
            if (typeof val === "string" && /^\d{4}-\d{2}-\d{2}/.test(val)) {
            return new Date(val);
            }
            return val;
        }
    );

How do implement hierarchical checkbox structure with group selection and deselection?
    Refer to hierarchical-checkbox.js

What is your strategy for running an array of promises sequentially?
    Refer to promise-sequential.js

How to modify localStorage in JavaScript to make stored items expire after a certain time.
    Refer to localstorage-expiry.js

How do you write a JavaScript function to retrieve the sibling on the left of a DOM element?
    const el = document.getElementById("option_1b");
    const leftSibling = el.previousElementSibling;

How do you go about placing an element in the middle of an image?
    Parent relative, child p absolute with top, left, transform: translate(-50%, -50%)

Could you walk us through the process of creating a deep clone function in JavaScript, with a focus on tackling complex data structures and circular references?
    structuredClone in modern browsers 
    custom fn - use WeakMap to handle circular references and avoid memory leaks

    WeakMap is safer because it avoids memory leaks during deep cloning. 
    WeakMap removes entries automatically once original objects are garbage-collected, and it only allows objects as keys, which matches the deep-clone use case

How do you code the promisify() function to change callback-based functions into Promise-based in JavaScript?
    /** Callback based approach */
    function readData(data, callback) {
    if (!data) {
        callback(new Error('Invalid input'), null);
        return;
    }
    callback(null, 'Success');
    }
    readData("Hello", (err, success) => {
    console.log('Response: ', err,success)
    });
    readData(null, (err, success) => {
    console.log('Response: ', err,success)
    });

    /* Promise based approach */
    async function readData(data) {
    return new Promise((resolve, reject) => {
        if (!data) {
        reject(new Error('Invalid input'));
        return;
        }
        resolve('Success'); 
    });
    }

    (async() => {
    try {
        const response = await readData("Promise test");
        console.log(response);
    } catch (e) {
        console.error('Promise error', e)
    }
    })();

In your experience, what are the critical factors in creating an image upload and preview component for web applications, especially in handling files and generating previews?

    1) Upload image (click and drop & drop)
    2) File size and type validation (jpg/png within 5MB)
    3) Image preview with clean up
        const previewUrl = URL.createObjectURL(file);
        URL.revokeObjectURL(previewUrl); // prevents memory leaks

        FileReader.readAsdataURL is slow for large files and takes more memory as it has to read the entire file and convert to Base64 string.  createObjectURL creates a temporary URL that reads the File from memory directly.
    
    4) Compress, resize image (e.g. browser-image-compression library)
    5) Accessibility and UX:
        - Drag & drop 
        - Upload progress (axios onUploadProgress event.loaded, event.total)
        - Error state 
        - Loading preview skeleton image 
        - Aria attribute for screen reader 
    6) Handling cancel and retry (Abort controller)
    7) Security - don't allow SVG as it can contain JS and cause XSS


What would be your approach to developing the getElementsByStyle function in JavaScript, aimed at locating elements with a given CSS style, and how would you navigate the DOM?


Can you create a store class featuring set(Node, value), get(Node), and has(Node) methods for managing Nodes and their values?

In JavaScript, how can you develop a system for handling cookies, including their storage and retrieval?


Can you elucidate on what constitutes a compositing layer in CSS?

Can you demonstrate the process of creating a two-way binding in JavaScript, ensuring an input field's changes are immediately mirrored in another element?

Can you construct the useIsMounted() hook in React that returns a true or false based on the component's mount state?


================================




System Design:

In your experience, what are the critical factors in creating an image upload and preview component for web applications, especially in handling files and generating previews?

How would you architect the frontend of a video-sharing site like YouTube, considering key aspects like playback and user experience?

How would you go about creating a typeahead widget that offers instant suggestions to users for fast and efficient search results?

How would you approach creating a user interface component like a dropdown menu using HTML, CSS, and JavaScript?

How to set up and prepare an npm package? 

How do you plan to design a video streaming service that can accommodate a large user base and deliver content efficiently?

How would you implement a menu structure that collapses open sub-menus when a new parent is selected, while maintaining the expanded state when interacting with nested sub-menus?

Can you create an HTML and CSS prototype to display information over an image upon mouse hover?

Can you outline the process for developing a carousel widget featuring a rotation of images or content with customizable navigation and effects?

When creating a system for a Jira sprint board with high ticket volumes, what components and optimizations would you prioritize for optimal performance?

How would you engineer a secure login process using QR codes for mobile device verification?

What's your approach to creating a visual progress bar that accurately reflects the status of an API request or data loading process?

What would be your strategy for designing the frontend of a messenger app that includes instant messaging, group discussions, message archiving, and alerts for users?



==================

var is hoisted and initialized to undefined

let/const are hoisted but not initialized. variable enters Temporal dead zone.


Promise:
    Eager → starts executing on creation
    Single value → resolve or reject once
    No native cancellable

Observable:
    Lazy → starts on subscribe()
    Multiple values over time (next)
    Cancellable via unsubscribe()

How to make an object read only?
  - Object.freeze() - shallow. Write custom recursive fn for deep 
  - Proxy - deep
